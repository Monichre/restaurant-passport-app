<!-- Generated by SpecStory -->

# User Rankings and Popular Restaurants UI (2025-03-03 15:36:06)

_**User**_

Implement a user interface to display user rankings where users are displayed by who has the most punch card entries. Should also display most popular restaurants by punch cards as well

---

_**Assistant**_

I'll implement a leaderboard interface that shows user rankings by punch card entries and popular restaurants. Let me first explore the codebase to understand the existing structure.

---

Read file: src/app/leaderboard/page.tsx

---



Let me check if there's an existing leaderboard page structure or if I need to create one from scratch.

---

<details>
            <summary>Listed directory src/app ‚Ä¢ **9** results</summary>
        
| Name |
|-------|
| üìÅ `leaderboard` |
| üìÑ `page.tsx` |
| üìÑ `layout.tsx` |
| üìÅ `(public)` |
| üìÑ `globals.css` |
| üìÅ `api` |
| üìÅ `users` |
| üìÅ `admin` |
| üìÑ `favicon.ico` |

</details>

---



I see there's already a leaderboard directory with a page.tsx file. Let me check its contents:

---

Read file: src/app/leaderboard/page.tsx

---





Let me try to read the file again with a different approach:

---

<details>
            <summary>Searched codebase "leaderboard page component" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/app/leaderboard/page.tsx` | L1-1 |
| `src/types/api.ts` | L132-142 |
| `src/components/nav/nav.tsx` | L31-108 |
| `src/components/nav/nav.stories.tsx` | L75-84 |
| `src/components/kokonutui/profile-04.tsx` | L1-16 |
| `src/app/users/[id]/profile/page.tsx` | L1-42 |
| `src/app/admin/users/page.tsx` | L1-50 |
| `src/components/admin/Sidebar.tsx` | L1-64 |
| `src/features/prizes/prize-card/PrizeCard.tsx` | L1-35 |
| `src/features/users/UserPunchCards.tsx` | L84-125 |
| `src/components/nav/nav.tsx` | L1-23 |
| `src/components/kokonutui/card-10.tsx` | L40-62 |
| `src/components/kokonutui/profile-04.tsx` | L99-141 |
| `src/features/restaurants/Restaurant.tsx` | L1-58 |
| `src/features/users/UserPunchCard.tsx` | L1-20 |
| `src/app/admin/page.tsx` | L1-56 |
| `src/app/admin/users/page.tsx` | L50-88 |
| `src/app/page.tsx` | L85-130 |
| `src/components/admin/restaurants-table.tsx` | L1-32 |
| `src/components/kokonutui/profile-04.tsx` | L16-59 |
| `src/app/admin/restaurants/[id]/page.tsx` | L39-109 |
| `src/features/users/UserPunchCards.tsx` | L25-84 |
| `src/app/admin/restaurants/page.tsx` | L84-124 |
| `src/components/admin/restaurants-table.tsx` | L266-330 |
| `src/app/admin/restaurants/[id]/page.tsx` | L1-39 |

</details>

---



Now let me check if there are any database models or API endpoints related to leaderboards:

---

<details>
            <summary>Searched codebase "leaderboard API endpoint or database model" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/types/api.ts` | L132-142 |
| `src/app/leaderboard/page.tsx` | L1-1 |
| `src/db/models/achievements/achievements.ts` | L15-22 |
| `src/db/models/achievements/achievements.ts` | L7-15 |
| `src/db/models/achievements/achievements.ts` | L29-40 |
| `src/db/models/achievements/achievements.ts` | L1-7 |
| `src/db/models/achievements/achievements.ts` | L22-29 |
| `src/db/models/point-balances/point-balances.ts` | L1-7 |
| `src/db/models/point-balances/point-balances.ts` | L15-23 |
| `src/db/models/prize-redemptions/prize-redemptions.ts` | L15-22 |
| `src/db/models/raffle-entries/raffle-entries.ts` | L15-22 |
| `src/db/models/achievements/achievements.ts` | L49-63 |
| `.cursor/rules/prd.mdc` | L163-217 |
| `src/db/models/achievements/achievements.ts` | L40-49 |
| `src/db/schema.ts` | L40-61 |
| `src/db/models/achievements/achievements.ts` | L63-70 |
| `src/db/models/raffle-entries/raffle-entries.ts` | L1-7 |
| `src/db/models/point-balances/point-balances.ts` | L7-15 |
| `src/db/models/point-balances/point-balances.ts` | L30-43 |
| `src/db/models/raffle-entries/raffle-entries.ts` | L7-15 |
| `.cursor/rules/prd.mdc` | L217-269 |
| `src/db/models/prize-redemptions/prize-redemptions.ts` | L1-7 |
| `src/db/models/prizes/prizes.ts` | L18-22 |
| `src/db/models/prize-redemptions/prize-redemptions.ts` | L36-43 |
| `src/types/db.ts` | L147-158 |

</details>

---





Let me check for punch card related models and endpoints:

---

<details>
            <summary>Searched codebase "punch card database model and API endpoints" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/types/db.ts` | L28-40 |
| `src/db/models/punch-cards/punch-cards.ts` | L1-9 |
| `src/db/models/punch-cards/punch-cards.ts` | L111-126 |
| `src/db/models/punch-cards/punch-cards.ts` | L9-17 |
| `src/app/api/scan/route.ts` | L1-42 |
| `src/db/models/punch-cards/punch-cards.ts` | L97-111 |
| `src/db/models/punch-cards/punch-cards.ts` | L88-97 |
| `src/db/models/punch-cards/punch-cards.ts` | L17-24 |
| `src/app/api/restaurants/[id]/scan/route.ts` | L1-53 |
| `src/db/models/punch-cards/punch-cards.ts` | L126-130 |
| `src/types/schemas.ts` | L55-67 |
| `src/db/models/prize-redemptions/prize-redemptions.ts` | L29-36 |
| `src/db/models/punch-cards/punch-cards.ts` | L47-64 |
| `src/db/models/punch-cards/punch-cards.ts` | L64-71 |
| `src/db/schema.ts` | L198-229 |
| `src/db/models/punch-cards/punch-cards.ts` | L71-88 |
| `src/db/models/raffle-entries/raffle-entries.ts` | L22-29 |
| `src/types/api.ts` | L83-90 |
| `src/db/models/punch-cards/punch-cards.ts` | L24-47 |
| `src/db/models/punch-cards/index.ts` | L1-1 |
| `src/types/api.ts` | L1-20 |
| `src/db/relations.ts` | L79-92 |
| `.cursor/rules/prd.mdc` | L112-163 |
| `src/db/models/index.ts` | L2-3 |
| `src/types/db.ts` | L86-100 |

</details>

---





Let me also check for restaurant models:

---

<details>
            <summary>Searched codebase "restaurant database model" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/types/db.ts` | L16-28 |
| `src/db/models/restaurants/restaurants.ts` | L36-45 |
| `src/db/schema.ts` | L1-22 |
| `src/db/models/restaurants/restaurants.ts` | L45-62 |
| `src/types/schemas.ts` | L36-48 |
| `src/db/models/restaurants/restaurants.ts` | L9-18 |
| `src/db/models/restaurants/restaurants.ts` | L1-9 |
| `src/db/models/restaurants/restaurants.ts` | L62-66 |
| `drizzle/meta/0002_snapshot.json` | L545-594 |
| `src/db/schema.ts` | L146-173 |
| `src/app/api/restaurants/[id]/route.ts` | L1-56 |
| `src/db/models/restaurants/restaurants.ts` | L18-36 |
| `src/app/admin/restaurants/page.tsx` | L1-13 |
| `.cursor/rules/prd.mdc` | L112-163 |
| `drizzle/meta/0001_snapshot.json` | L545-594 |
| `src/types/db.ts` | L77-81 |
| `src/db/models/index.ts` | L1-2 |
| `src/db/models/restaurants/index.ts` | L1-1 |
| `drizzle/0001_exotic_vengeance.sql` | L1-1 |
| `src/types/db.ts` | L60-77 |
| `drizzle/meta/0000_snapshot.json` | L545-588 |
| `src/types/schemas.ts` | L48-53 |
| `src/db/models/prizes/prizes.ts` | L11-18 |
| `src/types/api.ts` | L60-67 |
| `src/components/admin/restaurants-table.tsx` | L1-32 |

</details>

---







Now let me check for any existing UI components that might be useful for the leaderboard:

---

<details>
            <summary>Searched codebase "UI components for tables or leaderboards" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/components/ui/table.tsx` | L1-67 |
| `src/components/ui/table.tsx` | L67-120 |
| `src/components/admin/restaurants-table.tsx` | L1-32 |
| `src/app/leaderboard/page.tsx` | L1-1 |
| `src/types/api.ts` | L132-142 |
| `src/components/kokonutui/profile-04.tsx` | L1-16 |
| `src/components/nav/nav.tsx` | L31-108 |
| `src/components/nav/nav.stories.tsx` | L75-84 |
| `src/components/admin/restaurants-table.tsx` | L266-330 |
| `src/components/kokonutui/profile-04.tsx` | L99-141 |
| `src/components/nav/nav.tsx` | L1-23 |
| `src/components/kokonutui/bento-grid.tsx` | L1-23 |
| `src/components/admin/restaurants-table.tsx` | L49-131 |
| `src/features/users/UserPunchCards.tsx` | L84-125 |
| `src/components/kokonutui/card-10.tsx` | L40-62 |
| `src/app/admin/users/page.tsx` | L50-88 |
| `src/components/admin/restaurants-table.tsx` | L131-200 |
| `src/features/users/UserPunchCard.tsx` | L1-20 |
| `src/components/kokonutui/bento-grid.tsx` | L27-65 |
| `src/app/admin/users/page.tsx` | L1-50 |
| `src/components/admin/restaurants-table.tsx` | L200-266 |
| `src/components/kokonutui/profile-04.tsx` | L16-59 |
| `src/components/admin/restaurants-table.tsx` | L37-41 |
| `src/components/ui/sidebar.tsx` | L624-683 |
| `src/components/ui/skeleton.tsx` | L1-13 |

</details>

---







Let me check for any existing user models:

---

<details>
            <summary>Searched codebase "user database model" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/types/db.ts` | L1-16 |
| `src/db/models/users/users.ts` | L30-40 |
| `src/db/schema.ts` | L22-40 |
| `src/db/models/users/users.ts` | L40-51 |
| `src/db/models/users/users.ts` | L8-17 |
| `src/db/models/users/users.ts` | L1-8 |
| `src/types/schemas.ts` | L1-23 |
| `drizzle/meta/0002_snapshot.json` | L594-678 |
| `src/db/models/users/users.ts` | L51-55 |
| `src/db/models/users/users.ts` | L17-30 |
| `src/db/schema.ts` | L61-81 |
| `drizzle/meta/0001_snapshot.json` | L594-659 |
| `src/db/schema.ts` | L40-61 |
| `drizzle/meta/0000_snapshot.json` | L588-653 |
| `src/db/models/achievements/achievements.ts` | L29-40 |
| `src/db/schema.ts` | L81-109 |
| `src/db/models/index.ts` | L1-1 |
| `src/types/db.ts` | L100-110 |
| `src/db/models/users/index.ts` | L1-1 |
| `src/db/relations.ts` | L19-33 |
| `src/types/index.ts` | L15-24 |
| `src/db/schema.ts` | L198-229 |
| `src/db/models/punch-cards/punch-cards.ts` | L71-88 |
| `src/db/models/raffle-entries/raffle-entries.ts` | L15-22 |
| `src/db/schema.ts` | L173-198 |

</details>

---







Now I'll create the necessary files for the leaderboard page. First, I'll create a server-side function to get the leaderboard data:

---

```diff
- 
+ "use server";
+ 
+ import { sql } from "drizzle-orm";
+ import { db } from "../../db";
+ import { punchCards, users, restaurants } from "../../schema";
+ 
+ /**
+  * Get top users by punch card count
+  */
+ export const getTopUsersByPunchCardCount = async (limit = 10) => {
+   const result = await db.execute(sql`
+     SELECT 
+       u.id as "userId", 
+       u.name as "userName", 
+       COUNT(pc.id) as "punchCardCount",
+       RANK() OVER (ORDER BY COUNT(pc.id) DESC) as "rank"
+     FROM 
+       ${users} u
+     JOIN 
+       ${punchCards} pc ON u.id = pc.user_id
+     GROUP BY 
+       u.id, u.name
+     ORDER BY 
+       "punchCardCount" DESC
+     LIMIT ${limit}
+   `);
+ 
+   return result.rows;
+ };
+ 
+ /**
+  * Get popular restaurants by punch card count
+  */
+ export const getPopularRestaurantsByPunchCardCount = async (limit = 10) => {
+   const result = await db.execute(sql`
+     SELECT 
+       r.id as "restaurantId", 
+       r.name as "restaurantName", 
+       r.image_url as "imageUrl",
+       COUNT(pc.id) as "punchCardCount",
+       RANK() OVER (ORDER BY COUNT(pc.id) DESC) as "rank"
+     FROM 
+       ${restaurants} r
+     JOIN 
+       ${punchCards} pc ON r.id = pc.restaurant_id
+     GROUP BY 
+       r.id, r.name, r.image_url
+     ORDER BY 
+       "punchCardCount" DESC
+     LIMIT ${limit}
+   `);
+ 
+   return result.rows;
+ }; 
```

---



Let me fix the linter errors in the leaderboard.ts file:

---

```diff
    `);
  
- 	return result.rows;
+ 	return result as unknown as {
+ 		userId: bigint;
+ 		userName: string;
+ 		punchCardCount: number;
+ 		rank: number;
+ 	}[];
  };
  
```

```diff
    `);
  
- 	return result.rows;
+ 	return result as unknown as {
+ 		restaurantId: bigint;
+ 		restaurantName: string;
+ 		imageUrl: string;
+ 		punchCardCount: number;
+ 		rank: number;
+ 	}[];
  };
  
```

---





Now let's create the types for the leaderboard data:

---

```diff
  	activeUsersLast30Days: number;
  };
+ 
+ /**
+  * User Leaderboard Entry
+  */
+ export type UserLeaderboardEntry = {
+ 	userId: bigint;
+ 	userName: string;
+ 	punchCardCount: number;
+ 	rank: number;
+ };
+ 
+ /**
+  * Restaurant Leaderboard Entry
+  */
+ export type RestaurantLeaderboardEntry = {
+ 	restaurantId: bigint;
+ 	restaurantName: string;
+ 	imageUrl: string;
+ 	punchCardCount: number;
+ 	rank: number;
+ };
  
```

---







Now let's update the leaderboard.ts file to use these types:

---

```diff
  import { db } from "../../db";
  import { punchCards, users, restaurants } from "../../schema";
+ import type { UserLeaderboardEntry, RestaurantLeaderboardEntry } from "@/types/api";
  
  /**
   * Get top users by punch card count
   */
- export const getTopUsersByPunchCardCount = async (limit = 10) => {
+ export const getTopUsersByPunchCardCount = async (limit = 10): Promise<UserLeaderboardEntry[]> => {
  	const result = await db.execute(sql`
      SELECT 
```

```diff
    `);
  
- 	return result as unknown as {
- 		userId: bigint;
- 		userName: string;
- 		punchCardCount: number;
- 		rank: number;
- 	}[];
+ 	return result as unknown as UserLeaderboardEntry[];
  };
  
  /**
   * Get popular restaurants by punch card count
   */
- export const getPopularRestaurantsByPunchCardCount = async (limit = 10) => {
+ export const getPopularRestaurantsByPunchCardCount = async (limit = 10): Promise<RestaurantLeaderboardEntry[]> => {
  	const result = await db.execute(sql`
      SELECT 
```

```diff
    `);
  
- 	return result as unknown as {
- 		restaurantId: bigint;
- 		restaurantName: string;
- 		imageUrl: string;
- 		punchCardCount: number;
- 		rank: number;
- 	}[];
+ 	return result as unknown as RestaurantLeaderboardEntry[];
  };
  
```

---









Now let's create the leaderboard page:

---

```diff
- 
+ import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
+ import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
+ import { getTopUsersByPunchCardCount, getPopularRestaurantsByPunchCardCount } from "@/db/models/leaderboard/leaderboard";
+ import { convertBigInts } from "@/lib/utils";
+ import { UserLeaderboard } from "@/components/leaderboard/user-leaderboard";
+ import { RestaurantLeaderboard } from "@/components/leaderboard/restaurant-leaderboard";
+ 
+ export const metadata = {
+   title: "Leaderboard | Restaurant Passport",
+   description: "View top users and popular restaurants",
+ };
+ 
+ export default async function LeaderboardPage() {
+   // Fetch leaderboard data
+   const topUsers = await getTopUsersByPunchCardCount(10);
+   const popularRestaurants = await getPopularRestaurantsByPunchCardCount(10);
+ 
+   // Convert BigInt values to strings for serialization
+   const serializedTopUsers = convertBigInts(topUsers);
+   const serializedPopularRestaurants = convertBigInts(popularRestaurants);
+ 
+   return (
+     <div className="container mx-auto py-10 px-4 sm:px-6 lg:px-8">
+       <h1 className="text-3xl font-bold mb-6">Leaderboard</h1>
+       
+       <Tabs defaultValue="users" className="w-full">
+         <TabsList className="grid w-full grid-cols-2 mb-8">
+           <TabsTrigger value="users">Top Users</TabsTrigger>
+           <TabsTrigger value="restaurants">Popular Restaurants</TabsTrigger>
+         </TabsList>
+         
+         <TabsContent value="users">
+           <Card>
+             <CardHeader>
+               <CardTitle>Top Users</CardTitle>
+               <CardDescription>
+                 Users with the most punch cards
+               </CardDescription>
+             </CardHeader>
+             <CardContent>
+               <UserLeaderboard users={serializedTopUsers} />
+             </CardContent>
+           </Card>
+         </TabsContent>
+         
+         <TabsContent value="restaurants">
+           <Card>
+             <CardHeader>
+               <CardTitle>Popular Restaurants</CardTitle>
+               <CardDescription>
+                 Restaurants with the most punch cards
+               </CardDescription>
+             </CardHeader>
+             <CardContent>
+               <RestaurantLeaderboard restaurants={serializedPopularRestaurants} />
+             </CardContent>
+           </Card>
+         </TabsContent>
+       </Tabs>
+     </div>
+   );
+ }
+ 
```

---





Let's create the missing components:

---

<details>
            <summary>Searched codebase "tabs component shadcn" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/components/nav/nav.tsx` | L1-23 |
| `components.json` | L1-21 |
| `src/components/ui/sheet.tsx` | L1-54 |
| `src/components/nav/nav.tsx` | L31-108 |
| `src/components/ui/sidebar.tsx` | L414-473 |
| `src/components/ui/sidebar.tsx` | L286-333 |
| `src/components/ui/sidebar.tsx` | L512-534 |
| `src/components/ui/button.tsx` | L1-41 |
| `src/components/ui/sidebar.tsx` | L624-683 |
| `src/components/ui/badge.tsx` | L1-28 |
| `src/components/ui/table.tsx` | L1-67 |
| `src/components/ui/sheet.tsx` | L54-88 |
| `src/components/ui/sheet.tsx` | L102-140 |
| `src/components/ui/toast.tsx` | L1-39 |
| `src/components/nav/nav.stories.tsx` | L149-197 |
| `src/components/ui/sidebar.tsx` | L683-736 |
| `tailwind.config.ts` | L1-67 |
| `src/components/ui/sidebar.tsx` | L333-414 |
| `src/components/ui/card.tsx` | L1-76 |
| `src/components/ui/dialog.tsx` | L30-67 |
| `src/components/ui/tooltip.tsx` | L1-32 |
| `src/components/ui/sidebar.tsx` | L157-213 |
| `src/components/ui/sidebar.tsx` | L1-37 |
| `src/components/ui/dialog.tsx` | L1-30 |
| `src/components/ui/sidebar.tsx` | L593-624 |

</details>

---







Let's create the tabs component:

---

```bash
npx shadcn-ui@latest add tabs
```

```
dd tabsacBook-Pro-2021:restaurant-passport-app liamellis$ npx shadcn-ui@latest a 
Need to install the following packages:
shadcn-ui@0.9.5
Ok to proceed? (y)
```

---



---

_**User**_

Lets resume. Generate the restaurant leaderboard and use your leaderboard components. 

---

_**Assistant**_

I'll create the missing leaderboard components and complete the implementation. Let's start by creating the user leaderboard component:

---

```diff
- 
+ "use client";
+ 
+ import { Avatar, AvatarFallback } from "@/components/ui/avatar";
+ import { Badge } from "@/components/ui/badge";
+ import {
+   Table,
+   TableBody,
+   TableCell,
+   TableHead,
+   TableHeader,
+   TableRow,
+ } from "@/components/ui/table";
+ import { Trophy } from "lucide-react";
+ import { motion } from "framer-motion";
+ import type { UserLeaderboardEntry } from "@/types/api";
+ 
+ interface UserLeaderboardProps {
+   users: UserLeaderboardEntry[];
+ }
+ 
+ export function UserLeaderboard({ users }: UserLeaderboardProps) {
+   // Function to get rank badge color
+   const getRankBadgeColor = (rank: number) => {
+     switch (rank) {
+       case 1:
+         return "bg-yellow-500 text-yellow-950";
+       case 2:
+         return "bg-gray-300 text-gray-950";
+       case 3:
+         return "bg-amber-600 text-amber-950";
+       default:
+         return "bg-muted text-muted-foreground";
+     }
+   };
+ 
+   // Function to get initials from name
+   const getInitials = (name: string) => {
+     return name
+       .split(" ")
+       .map((n) => n[0])
+       .join("")
+       .toUpperCase();
+   };
+ 
+   return (
+     <div className="overflow-hidden rounded-md border">
+       <Table>
+         <TableHeader>
+           <TableRow>
+             <TableHead className="w-16 text-center">Rank</TableHead>
+             <TableHead>User</TableHead>
+             <TableHead className="text-right">Punch Cards</TableHead>
+           </TableRow>
+         </TableHeader>
+         <TableBody>
+           {users.length === 0 ? (
+             <TableRow>
+               <TableCell colSpan={3} className="h-24 text-center">
+                 No users found
+               </TableCell>
+             </TableRow>
+           ) : (
+             users.map((user, index) => (
+               <motion.tr
+                 key={user.userId.toString()}
+                 className="border-b transition-colors hover:bg-muted/50"
+                 initial={{ opacity: 0, y: 10 }}
+                 animate={{ opacity: 1, y: 0 }}
+                 transition={{ delay: index * 0.05 }}
+               >
+                 <TableCell className="text-center font-medium">
+                   {user.rank <= 3 ? (
+                     <Badge className={`${getRankBadgeColor(user.rank)}`}>
+                       {user.rank === 1 && <Trophy className="mr-1 h-3 w-3" />}
+                       {user.rank}
+                     </Badge>
+                   ) : (
+                     user.rank
+                   )}
+                 </TableCell>
+                 <TableCell>
+                   <div className="flex items-center gap-2">
+                     <Avatar className="h-8 w-8">
+                       <AvatarFallback className="bg-primary/10 text-primary">
+                         {getInitials(user.userName)}
+                       </AvatarFallback>
+                     </Avatar>
+                     <span className="font-medium">{user.userName}</span>
+                   </div>
+                 </TableCell>
+                 <TableCell className="text-right font-medium">
+                   {user.punchCardCount}
+                 </TableCell>
+               </motion.tr>
+             ))
+           )}
+         </TableBody>
+       </Table>
+     </div>
+   );
+ } 
```

---





Now let's create the restaurant leaderboard component:

---

```diff
- 
+ "use client";
+ 
+ import { Badge } from "@/components/ui/badge";
+ import {
+   Table,
+   TableBody,
+   TableCell,
+   TableHead,
+   TableHeader,
+   TableRow,
+ } from "@/components/ui/table";
+ import { Trophy } from "lucide-react";
+ import { motion } from "framer-motion";
+ import Image from "next/image";
+ import Link from "next/link";
+ import type { RestaurantLeaderboardEntry } from "@/types/api";
+ 
+ interface RestaurantLeaderboardProps {
+   restaurants: RestaurantLeaderboardEntry[];
+ }
+ 
+ export function RestaurantLeaderboard({ restaurants }: RestaurantLeaderboardProps) {
+   // Function to get rank badge color
+   const getRankBadgeColor = (rank: number) => {
+     switch (rank) {
+       case 1:
+         return "bg-yellow-500 text-yellow-950";
+       case 2:
+         return "bg-gray-300 text-gray-950";
+       case 3:
+         return "bg-amber-600 text-amber-950";
+       default:
+         return "bg-muted text-muted-foreground";
+     }
+   };
+ 
+   return (
+     <div className="overflow-hidden rounded-md border">
+       <Table>
+         <TableHeader>
+           <TableRow>
+             <TableHead className="w-16 text-center">Rank</TableHead>
+             <TableHead>Restaurant</TableHead>
+             <TableHead className="text-right">Punch Cards</TableHead>
+           </TableRow>
+         </TableHeader>
+         <TableBody>
+           {restaurants.length === 0 ? (
+             <TableRow>
+               <TableCell colSpan={3} className="h-24 text-center">
+                 No restaurants found
+               </TableCell>
+             </TableRow>
+           ) : (
+             restaurants.map((restaurant, index) => (
+               <motion.tr
+                 key={restaurant.restaurantId.toString()}
+                 className="border-b transition-colors hover:bg-muted/50"
+                 initial={{ opacity: 0, y: 10 }}
+                 animate={{ opacity: 1, y: 0 }}
+                 transition={{ delay: index * 0.05 }}
+               >
+                 <TableCell className="text-center font-medium">
+                   {restaurant.rank <= 3 ? (
+                     <Badge className={`${getRankBadgeColor(restaurant.rank)}`}>
+                       {restaurant.rank === 1 && <Trophy className="mr-1 h-3 w-3" />}
+                       {restaurant.rank}
+                     </Badge>
+                   ) : (
+                     restaurant.rank
+                   )}
+                 </TableCell>
+                 <TableCell>
+                   <Link 
+                     href={`/restaurants/${restaurant.restaurantId}`}
+                     className="flex items-center gap-3 hover:underline"
+                   >
+                     <div className="relative h-10 w-10 overflow-hidden rounded-md">
+                       <Image
+                         src={restaurant.imageUrl || "https://via.placeholder.com/40"}
+                         alt={restaurant.restaurantName}
+                         fill
+                         className="object-cover"
+                         sizes="40px"
+                       />
+                     </div>
+                     <span className="font-medium">{restaurant.restaurantName}</span>
+                   </Link>
+                 </TableCell>
+                 <TableCell className="text-right font-medium">
+                   {restaurant.punchCardCount}
+                 </TableCell>
+               </motion.tr>
+             ))
+           )}
+         </TableBody>
+       </Table>
+     </div>
+   );
+ } 
```

---







Let's install the missing avatar component:

---

```bash
npx shadcn-ui@latest add avatar
```

```
dd avatarBook-Pro-2021:restaurant-passport-app liamellis$ npx shadcn-ui@latest a 
Need to install the following packages:
shadcn-ui@0.9.5
Ok to proceed? (y) y
The 'shadcn-ui' package is deprecated. Please use the 'shadcn' package instead:

  npx shadcn@latest add avatar

For more information, visit: https://ui.shadcn.com/docs/cli

Liams-MacBook-Pro-2021:restaurant-passport-app liamellis$
```

---







Let's try with the new command:

---

Cancelled

---



---

_**User**_

Already installed this component 

---

_**Assistant**_

Great! Let's install the tabs component then:

---

Cancelled

---



---

