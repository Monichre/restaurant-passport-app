<!-- Generated by SpecStory -->

# Storybook export mismatch error (2025-06-03 21:42:58)

_**User**_

info => Serving static files from /Users/liamellis/Desktop/restaurant-passport-app/node_modules/@chromatic-com/storybook/assets at /addon-visual-tests-assets
info => Serving static files from ././public at /
info => Starting manager..
✘ [ERROR] No matching export in "global-externals:storybook/internal/components" for import "Icons"

    node_modules/@storybook/addon-toolbars/dist/manager.js:3:62:
      3 │ ...List, IconButton, Icons } from 'storybook...
        ╵                      ~~~~~

SB_CORE-SERVER_0004 (NoMatchingExportError): There was an exports mismatch error when trying to build Storybook.
Please check whether the versions of your Storybook packages match whenever possible, as this might be the cause.

Problematic example:
{ "@storybook/react": "7.5.3", "@storybook/react-vite": "7.4.5", "storybook": "7.3.0" }

Correct example:
{ "@storybook/react": "7.5.3", "@storybook/react-vite": "7.5.3", "storybook": "7.5.3" }

Please run `npx storybook doctor` for guidance on how to fix this issue.

---

_**Assistant**_



---

I can see the issue! You have mismatched Storybook package versions which is causing the export error. Looking at your `package.json`, most packages are on version 9.0.4, but you have some on different versions:

- `@storybook/addon-essentials`: "^8.6.14" (should be 9.0.4)
- `@chromatic-com/storybook`: "^4.0.0" (this might be causing conflicts)

Let's first run the Storybook doctor to get a detailed diagnosis, then fix the version mismatches.

---

```bash
npx storybook doctor
```

```
px storybook doctor
❯ npx storybook doctor
🩺 The doctor is checking the health of your Storybook..
╭ Incompatible packages found ──────────────────────────────────────────────────────────────────────╮
│                                                                                                   │
│   You are currently using Storybook 9.0.4 but you have packages which are incompatible with it:   │
│   - @storybook/addon-essentials@8.6.14 which depends on 8.6.14                                    │
│   Repo: https://github.com/storybookjs/storybook/tree/next/code/addons/essentials                 │
│                                                                                                   │
│                                                                                                   │
│   Please consider updating your packages or contacting the maintainers for compatibility          │
│   details.                                                                                        │
│   For more on Storybook 9 compatibility, see the linked GitHub issue:                             │
│   https://github.com/storybookjs/storybook/issues/30944                                           │
│                                                                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
WARN An issue occurred while trying to find dependencies metadata using npm.

You can always recheck the health of your project by running:
npx storybook doctor

Full logs are available in /Users/liamellis/Desktop/restaurant-passport-app/doctor-storybook.log


    ~/Des/restaurant-passport-app  on   main *5 !3 ?1    ✔  took 6s   at 09:44:12 PM  
directory
__tests__/  drizzle/  node_modules/  plop-templates/  public/  scripts/  src/
```

---



---

Perfect! The Storybook doctor confirmed the issue. You have `@storybook/addon-essentials@8.6.14` which is incompatible with your Storybook 9.0.4 setup.

Let me fix this by updating the package versions to be consistent:

---



---



---

Now let's also update the `@chromatic-com/storybook` package to a more recent version that's compatible with Storybook 9:

---



---



---

Now let's install the updated packages:

---

```bash
bun install
```

```
❯ bun install
[0.46ms] ".env.local", ".env"
bun install v1.2.4 (fd9a5ea6)
warn: incorrect peer dependency "storybook@9.0.4"

error: No version matching "^9.0.4" found for specifier "@storybook/addon-essentials" (but package ex
ists)
error: @storybook/addon-essentials@^9.0.4 failed to resolve

    ~/Des/restaurant-passport-app  on   main *5 !4 ?2              1 ✘  at 09:44:46 PM  
directory
__tests__/  drizzle/  node_modules/  plop-templates/  public/  scripts/  src/
```

---



---

It looks like version 9.0.4 might not exist for `@storybook/addon-essentials`. Let me check what versions are available:

---

```bash
npm view @storybook/addon-essentials versions --json | tail -20
```

```
❯ npm view @storybook/addon-essentials versions --json | tail -20
  "8.6.10",
  "8.6.11",
  "8.6.12",
  "8.6.13",
  "8.6.14",
  "8.7.0-alpha.0",
  "9.0.0-alpha.0",
  "9.0.0-alpha.1",
  "9.0.0-alpha.2",
  "9.0.0-alpha.3",
  "9.0.0-alpha.4",
  "9.0.0-alpha.5",
  "9.0.0-alpha.6",
  "9.0.0-alpha.7",
  "9.0.0-alpha.8",
  "9.0.0-alpha.9",
  "9.0.0-alpha.10",
  "9.0.0-alpha.11",
  "9.0.0-alpha.12"
]

    ~/Des/restaurant-passport-app  on   main *5 !12 ?5               ✔  at 09:47:44 PM  
directory
__tests__/  drizzle/  node_modules/  plop-templates/  public/  scripts/  src/
```

---



---

I see the issue! The latest stable version of `@storybook/addon-essentials` is 8.6.14, and all the 9.x versions are alpha releases. Let's align everything to the stable 8.x series instead.

Let me check what the latest 8.x versions are for the other Storybook packages:

---

```bash
npm view @storybook/nextjs versions --json | grep '"8\.' | tail -5
```

```
<ok/nextjs versions --json | grep '"8\.' | tail -5
❯ npm view @storybook/nextjs versions --json | grep '"8\.' | tail -5
  "8.6.11",
  "8.6.12",
  "8.6.13",
  "8.6.14",
  "8.7.0-alpha.0",

    ~/Des/restaurant-passport-app  on   main *5 !12 ?6               ✔  at 09:48:03 PM  
```

---



---

Perfect! Let's downgrade all Storybook packages to the stable 8.6.14 version to ensure compatibility:

---



---



---

Let me also update the main `storybook` package:

---



---



---

Let me also check what the correct version of `@chromatic-com/storybook` should be for Storybook 8.6.14:

---

```bash
npm view @chromatic-com/storybook versions --json | tail -10
```

```
❯ npm view @chromatic-com/storybook versions --json | tail -10
  "4.0.0-next.10",
  "4.0.0-next.11",
  "4.0.0-next.12",
  "4.0.0-next.13",
  "4.0.0-next.14",
  "4.0.0-next.15",
  "4.0.0-next.16",
  "4.0.0",
  "4.0.1--canary.4353831.0"
]

    ~/Des/restaurant-passport-app  on   main *5 !12 ?6               ✔  at 09:48:29 PM  
directory
__tests__/  drizzle/  node_modules/  plop-templates/  public/  scripts/  src/
```

---



---

Let me revert the `@chromatic-com/storybook` back to 4.0.0:

---



---



---

Now let's install the corrected packages with aligned versions:

---

```bash
bun install
```

```
❯ bun install
[0.07ms] ".env.local", ".env"
bun install v1.2.4 (fd9a5ea6)
error: No version matching "^8.6.14" found for specifier "@storybook/nextjs-vite" (but package exists
)

error: No version matching "^8.6.14" found for specifier "@storybook/addon-vitest" (but package exist
s)
error: @storybook/addon-vitest@^8.6.14 failed to resolve
error: @storybook/nextjs-vite@^8.6.14 failed to resolve

    ~/Des/restaurant-passport-app  on   main *5 !12 ?6             1 ✘  at 09:48:47 PM  
```

---



---

Some packages don't have 8.6.14 versions. Let me check what's available for these problematic packages:

---

```bash
npm view @storybook/nextjs-vite versions --json | tail -10
```

```
❯ npm view @storybook/nextjs-vite versions --json | tail -10
  "9.0.0-rc.5",
  "9.0.0",
  "9.0.1",
  "9.0.2",
  "9.0.3",
  "9.0.4",
  "9.1.0-alpha.0",
  "9.1.0-alpha.1",
  "9.1.0-alpha.2"
]

    ~/Des/restaurant-passport-app  on   main *5 !12 ?6               ✔  at 09:49:05 PM  
directory
__tests__/  drizzle/  node_modules/  plop-templates/  public/  scripts/  src/
```

---



---

```bash
npm view @storybook/addon-vitest versions --json | tail -10
```

```
❯ npm view @storybook/addon-vitest versions --json | tail -10
  "9.0.0-rc.5",
  "9.0.0",
  "9.0.1",
  "9.0.2",
  "9.0.3",
  "9.0.4",
  "9.1.0-alpha.0",
  "9.1.0-alpha.1",
  "9.1.0-alpha.2"
]

    ~/Des/restaurant-passport-app  on   main *5 !12 ?6               ✔  at 09:49:26 PM  
directory
__tests__/  drizzle/  node_modules/  plop-templates/  public/  scripts/  src/
```

---

